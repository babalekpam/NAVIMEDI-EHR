import{r as t,cg as y,j as e,C as u,g as x,d as p,e as h,f as g,d5 as f,d4 as j,d6 as N,d7 as S,d8 as b,h as v}from"./index-DHAHNq0D.js";const k=j("pk_live_51IGTenIOOGo5yxk3MsJtzIZrryk7cjsYdlxt3IOndCNUnAcgkyf4vUHEOxDF6tZg5rYHN9cam5uYYkuaJdfFIke800vrpXeFMZ");function w({clientSecret:i}){const r=N(),n=S(),[a,c]=t.useState(!1),[l,o]=t.useState(""),m=async s=>{if(s.preventDefault(),!r||!n)return;c(!0);const{error:d}=await r.confirmPayment({elements:n,confirmParams:{return_url:`${window.location.origin}/payment-success`}});d.type==="card_error"||d.type==="validation_error"?o(d.message||"An error occurred"):o("An unexpected error occurred."),c(!1)};return e.jsxs(u,{className:"w-full max-w-lg mx-auto",children:[e.jsxs(p,{children:[e.jsx(h,{children:"Complete Your Payment"}),e.jsx(g,{children:"Healthcare service payment - $50.00"})]}),e.jsx(x,{children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsx("div",{className:"border rounded-lg p-4 bg-white",children:e.jsx(b,{})}),e.jsx(v,{disabled:a||!r||!n,type:"submit",className:"w-full",children:a?"Processing...":"Pay $50.00"}),l&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:l})]})})]})}function C(){const[i,r]=t.useState(""),[n,a]=t.useState(!0),[c,l]=t.useState("");if(t.useEffect(()=>{console.log("ðŸš€ Starting payment setup..."),console.log("ðŸ”‘ Stripe key exists:",!0),console.log("ðŸ”‘ Stripe key preview:","pk_live_51IGTenIOOGo5yxk3MsJtzIZrryk7cjsYdlxt3IOndCNUnAcgkyf4vUHEOxDF6tZg5rYHN9cam5uYYkuaJdfFIke800vrpXeFMZ".substring(0,20)+"...");const m=setTimeout(()=>{console.log("ðŸ“ž Making API request to create payment intent..."),y("/api/create-payment-intent",{method:"POST",body:{amount:50}}).then(s=>{if(console.log("ðŸ”¥ PAYMENT INTENT SUCCESS:",s),s.clientSecret)r(s.clientSecret),console.log("âœ… Client secret set, should render form now");else throw new Error("No client secret in response");a(!1)}).catch(s=>{console.error("ðŸ’¥ PAYMENT ERROR:",s),l(`Failed to initialize payment: ${s.message}`),a(!1)})},100);return()=>clearTimeout(m)},[]),n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx(u,{className:"w-full max-w-md mx-auto",children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Setting up payment..."})]})})});if(c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx(u,{className:"w-full max-w-md mx-auto",children:e.jsxs(p,{children:[e.jsx(h,{children:"Payment Error"}),e.jsx(g,{children:c})]})})});const o={clientSecret:i,appearance:{theme:"stripe",variables:{colorPrimary:"#0570de"}}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Healthcare Payment"}),e.jsx("p",{className:"text-gray-600",children:"Secure payment processing"})]}),i&&e.jsx(f,{stripe:k,options:o,children:e.jsx(w,{clientSecret:i})})]})})}export{C as default};
