[root@mail ~]# cd /var/www/vhosts/navimedi.org/httpdocs/NaviMed
[root@mail NaviMed]# npm run
Lifecycle scripts included in rest-express@1.0.0:
  start
    NODE_ENV=production node dist/index.js
available via `npm run-script`:
  dev
    NODE_ENV=development tsx server/index.ts
  build
    vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist
  check
    tsc
  db:push
    drizzle-kit push
[root@mail NaviMed]# npm run build

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.21 building for production...
✓ 3669 modules transformed.
[plugin:vite:reporter] [plugin vite:reporter] 
(!) /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/lib/queryClient.ts is dynamically imported by /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/communication/communication-viewer.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/communication/language-manager.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/communication/language-manager.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/lab-orders.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/lab-results-reporting.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/lab-results.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/medical-communications.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/medical-communications.tsx but also statically imported by /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/App.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/admin/AdminPermissionsManager.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/dashboard/department-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/forms/change-password-form.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/forms/visit-summary-form.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/forms/vital-signs-form.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/hospital/HospitalUserRoleManagement.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/patient/PatientAccessRequestManager.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/pharmacy/UserRolesManagement.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/training-enrollment-form.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/components/ui/currency-settings.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/hooks/useCurrency.ts, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/lib/dashboard-invalidation.ts, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/lib/enhanced-mutations.ts, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/admin-counter-reset.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/admin-medical-codes-simple.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/advertisements.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/allergy-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/appointments.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/bi-reports.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/billing-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/billing.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/checkout-simple.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/checkout.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/developer-portal.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/doctor-calendar.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/document-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/forgot-password.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/health-recommendations.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/health-reminders.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/health-surveys.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/hospital-billing.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/inventory-audits.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/lab-orders.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/laboratory-dashboard.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/leave-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/login.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/medication-insurance-claims.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/patient-education.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/patient-login.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/patient-portal.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/patients.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/pharmacy-customers.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/post-lab-results.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/prescriptions.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/profile-settings.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/receptionist-dashboard.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/reports.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/reset-password.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/service-pricing-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/staff-scheduling.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/subscribe.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/super-admin-client-management.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/super-admin-dashboard.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/supplier-portal.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/supplier-signup.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/time-tracking.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/user-roles.tsx, /var/www/vhosts/navimedi.org/httpdocs/NaviMed/client/src/pages/white-label-settings.tsx, dynamic import will not move module into another chunk.

../dist/public/index.html                                          10.08 kB │ gzip:   2.90 kB
../dist/public/assets/JPG_1753663321927-DgkMhBd3.jpg               55.42 kB
../dist/public/assets/image_1754352650858-BnYJl1Ml.png             96.44 kB
../dist/public/assets/image_1754352725355-BnK0MoBJ.png            117.79 kB
../dist/public/assets/image_1754352574197-4KYOPGEO.png            185.50 kB
../dist/public/assets/image_1754352599331-Dgf1L21r.png            203.98 kB
../dist/public/assets/image_1754352626174-D1C0mYbb.png            207.51 kB
../dist/public/assets/image_1754352767570-D0Cxo8da.png          6,887.79 kB
../dist/public/assets/index-bKOUvrUl.css                          251.81 kB │ gzip:  35.91 kB
../dist/public/assets/payment-success-D8mGX3YX.js                   1.49 kB │ gzip:   0.64 kB
../dist/public/assets/subscription-success-P53L9CV1.js              2.09 kB │ gzip:   0.83 kB
../dist/public/assets/checkout-DVqqT13D.js                          2.16 kB │ gzip:   0.75 kB
../dist/public/assets/checkout-simple-DwIloE2U.js                   3.00 kB │ gzip:   1.35 kB
../dist/public/assets/subscribe-fztjhEsf.js                         3.35 kB │ gzip:   1.34 kB
../dist/public/assets/laboratories-DBrtLMYu.js                      3.64 kB │ gzip:   1.33 kB
../dist/public/assets/platform-overview-Mizn51E_.js                 3.84 kB │ gzip:   1.24 kB
../dist/public/assets/billing-insurance-BK-JPdxQ.js                 4.06 kB │ gzip:   1.23 kB
../dist/public/assets/laboratory-order-processing-hl5qYlbN.js       4.16 kB │ gzip:   1.28 kB
../dist/public/assets/clinics-C_ohK_Po.js                           4.28 kB │ gzip:   1.51 kB
../dist/public/assets/security-compliance-D-vw6rA8.js               4.57 kB │ gzip:   1.34 kB
../dist/public/assets/organization-setup-YfMhUy-q.js                4.62 kB │ gzip:   1.40 kB
../dist/public/assets/electronic-health-records-BEXMAfOw.js         4.73 kB │ gzip:   1.43 kB
../dist/public/assets/prescription-management-DXNQ2IL1.js           4.74 kB │ gzip:   1.42 kB
../dist/public/assets/clinical-documentation-Du8LbojY.js            4.80 kB │ gzip:   1.41 kB
../dist/public/assets/help-center-CaKXX2AP.js                       4.85 kB │ gzip:   1.70 kB
../dist/public/assets/contact-CSvIQckj.js                           5.08 kB │ gzip:   1.38 kB
../dist/public/assets/payment-demo-BkXTzG9Z.js                      5.52 kB │ gzip:   1.47 kB
../dist/public/assets/status-BNfiSfvD.js                            5.59 kB │ gzip:   1.54 kB
../dist/public/assets/getting-started-CGOMDVHU.js                   5.93 kB │ gzip:   1.48 kB
../dist/public/assets/appointment-scheduling-CDtNuQKD.js            6.60 kB │ gzip:   1.73 kB
../dist/public/assets/patient-management-Ww4MDGBE.js                6.64 kB │ gzip:   1.81 kB
../dist/public/assets/pharmacy-billing-FQgB1zRy.js                  6.86 kB │ gzip:   1.86 kB
../dist/public/assets/video-integration-options-CygAmC64.js         7.49 kB │ gzip:   1.89 kB
../dist/public/assets/pharmacy-inventory-xJTt-aVK.js                7.51 kB │ gzip:   2.12 kB
../dist/public/assets/api-docs-DyVE-GRc.js                          7.59 kB │ gzip:   2.13 kB
../dist/public/assets/billing-management-BDvqEaav.js                7.71 kB │ gzip:   2.12 kB
../dist/public/assets/youtube-integration-Kj09RpL5.js               7.97 kB │ gzip:   2.22 kB
../dist/public/assets/inventory-audits-BvgvOet9.js                  8.04 kB │ gzip:   2.49 kB
../dist/public/assets/trial-status-DQe3sozG.js                      8.15 kB │ gzip:   2.19 kB
../dist/public/assets/laboratory-billing-Bs7-Rgrj.js                8.66 kB │ gzip:   2.63 kB
../dist/public/assets/integrations-aMlTGyxv.js                      9.10 kB │ gzip:   2.92 kB
../dist/public/assets/hospitals-DF4IwD-K.js                         9.69 kB │ gzip:   2.67 kB
../dist/public/assets/api-docs-CTVf9udx.js                          9.70 kB │ gzip:   2.76 kB
../dist/public/assets/vimeo-integration-1u5wIZOU.js                10.01 kB │ gzip:   2.39 kB
../dist/public/assets/aws-integration-VaPHxcDy.js                  12.36 kB │ gzip:   2.81 kB
../dist/public/assets/achievements-CTUG6zCs.js                     12.60 kB │ gzip:   2.55 kB
../dist/public/assets/prescription-archives-DU66Ajz6.js            13.28 kB │ gzip:   3.34 kB
../dist/public/assets/user-account-configuration-0j3rntjd.js       14.00 kB │ gzip:   3.33 kB
../dist/public/assets/troubleshooting-guide-CK11hM8Y.js            14.13 kB │ gzip:   4.10 kB
../dist/public/assets/video-player-CXnN3j6k.js                     16.26 kB │ gzip:   4.41 kB
../dist/public/assets/initial-system-configuration-OYIgjIo3.js     17.47 kB │ gzip:   3.75 kB
../dist/public/assets/quick-reference-guide-Dx39pHMF.js            18.04 kB │ gzip:   3.94 kB
../dist/public/assets/pharmacy-customers-DGtyabEw.js               19.30 kB │ gzip:   4.75 kB
../dist/public/assets/workflow-training-modules-CF5xuWwL.js        19.31 kB │ gzip:   4.26 kB
../dist/public/assets/role-based-access-setup-eIgu1uow.js          19.72 kB │ gzip:   4.24 kB
../dist/public/assets/laboratory-registration-D4CjFg-i.js          20.05 kB │ gzip:   4.56 kB
../dist/public/assets/first-patient-registration-vhJpQYnX.js       20.25 kB │ gzip:   4.14 kB
../dist/public/assets/medication-insurance-claims-BW-CgNAG.js      20.67 kB │ gzip:   5.05 kB
../dist/public/assets/lab-sample-management-eO_K_sLe.js            21.59 kB │ gzip:   4.44 kB
../dist/public/assets/hospital-billing-Bomj21Z5.js                 21.87 kB │ gzip:   4.47 kB
../dist/public/assets/lab-test-management-BczZPuXe.js              24.09 kB │ gzip:   4.81 kB
../dist/public/assets/lab-results-reporting-lwp-4gNb.js            25.20 kB │ gzip:   6.19 kB
../dist/public/assets/system-admin-training-B3XfzUUk.js            25.49 kB │ gzip:   5.40 kB
../dist/public/assets/lab-inventory-management-Dy-HbJV-.js         26.18 kB │ gzip:   5.57 kB
../dist/public/assets/comprehensive-user-training-obahBW3k.js      28.08 kB │ gzip:   6.63 kB
../dist/public/assets/documentation-CAjO7yIz.js                    29.08 kB │ gzip:   7.33 kB
../dist/public/assets/profile-settings-C67PgoZR.js                 30.24 kB │ gzip:   6.81 kB
../dist/public/assets/lab-analytics-dashboard-BB7cK-9t.js          42.55 kB │ gzip:  10.45 kB
../dist/public/assets/currency-management-BItn9v_t.js              43.66 kB │ gzip:  12.12 kB
../dist/public/assets/index-Dz5P_Oyt.js                         4,092.86 kB │ gzip: 931.50 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 16.99s

  dist/index.js  1016.5kb

⚡ Done in 48ms
[root@mail NaviMed]# pm2 logs navimed --lines 20 --nostream
[TAILING] Tailing last 20 lines for [navimed] process (change the value with --lines option)
/root/.pm2/logs/navimed-error-0.log last 20 lines:
0|navimed  |     at JSON.parse (<anonymous>)
0|navimed  |     at createStrictSyntaxError (/var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/body-parser/lib/types/json.js:169:10)
0|navimed  |     at parse (/var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/body-parser/lib/types/json.js:86:15)
0|navimed  |     at /var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/body-parser/lib/read.js:128:18
0|navimed  |     at AsyncResource.runInAsyncScope (node:async_hooks:206:9)
0|navimed  |     at invokeCallback (/var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/raw-body/index.js:238:16)
0|navimed  |     at done (/var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/raw-body/index.js:227:7)
0|navimed  |     at IncomingMessage.onEnd (/var/www/vhosts/navimedi.org/httpdocs/NaviMed/node_modules/raw-body/index.js:287:7)
0|navimed  |     at IncomingMessage.emit (node:events:524:28)
0|navimed  |     at endReadableNT (node:internal/streams/readable:1698:12)
0|navimed  |     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
0|navimed  |   expose: true,
0|navimed  |   statusCode: 400,
0|navimed  |   status: 400,
0|navimed  |   body: '"{\\"patientId\\":\\"60a6bd21-cd7b-4a3b-8300-5095e2c51fcb\\",\\"drugName\\":\\"Nurtec\\",\\"dosage\\":\\"25mg\\",\\"frequency\\":\\"Once daily\\",\\"patientConditions\\":[],\\"prescriptionData\\":{\\"patientId\\":\\"60a6bd21-cd7b-4a3b-8300-5095e2c51fcb\\",\\"medicationName\\":\\"Nurtec\\",\\"dosage\\":\\"25mg\\",\\"frequency\\":\\"Once daily\\",\\"quantity\\":30,\\"refills\\":1,\\"instructions\\":\\"MCKJEDGLIDKLWD/W\\",\\"status\\":\\"prescribed\\",\\"pharmacyTenantId\\":\\"\\",\\"expiryDate\\":\\"2026-11-20T20:23:01.628Z\\"}}"',
0|navimed  |   type: 'entity.parse.failed'
0|navimed  | }
0|navimed  | ⚠️ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | ⚠️ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined
0|navimed  | ⚠️ Stripe not initialized: STRIPE_SECRET_KEY must start with 'sk_'. Current key format: undefined

/root/.pm2/logs/navimed-out-0.log last 20 lines:
0|navimed  | 11:43:23 PM [express] GET /api/tenant/current 200 in 89ms :: {"id":"27ec4d0a-776b-42a9-82d2-bd5b8349c…
0|navimed  | 11:43:24 PM [express] GET /api/vital-signs 404 in 52ms :: {"message":"API endpoint not found","path":…
0|navimed  | 11:43:24 PM [express] GET /api/users 200 in 86ms :: [{"id":"29751c3c-c749-4936-be41-752d6006e5f2","te…
0|navimed  | 11:43:24 PM [express] GET /api/appointments 200 in 95ms :: []
0|navimed  | 11:43:24 PM [express] GET /api/patients 200 in 117ms :: [{"id":"60a6bd21-cd7b-4a3b-8300-5095e2c51fcb"…
0|navimed  | 11:43:25 PM [express] GET /api/vital-signs 404 in 57ms :: {"message":"API endpoint not found","path":…
0|navimed  | 11:43:27 PM [express] GET /api/vital-signs 404 in 60ms :: {"message":"API endpoint not found","path":…
0|navimed  | 11:43:31 PM [express] GET /api/vital-signs 404 in 79ms :: {"message":"API endpoint not found","path":…
0|navimed  | 11:44:00 PM [express] POST /api/appointments 403 in 1ms :: {"error":"CSRF token required. Obtain toke…
0|navimed  | 11:44:07 PM [express] GET /api/platform/stats 200 in 2ms :: {"platform":"NaviMED Healthcare Platform"…
0|navimed  | 11:44:07 PM [express] GET /api/user/language-preference 404 in 157ms :: {"message":"API endpoint not …
0|navimed  | 11:44:07 PM [express] GET /api/tenant/current 200 in 174ms :: {"id":"27ec4d0a-776b-42a9-82d2-bd5b8349…
0|navimed  | 11:44:07 PM [express] GET /api/vital-signs 404 in 60ms :: {"message":"API endpoint not found","path":…
0|navimed  | 11:44:07 PM [express] GET /api/patients 200 in 114ms :: [{"id":"60a6bd21-cd7b-4a3b-8300-5095e2c51fcb"…
0|navimed  | 11:44:07 PM [express] GET /api/appointments 200 in 173ms :: []
0|navimed  | 11:44:07 PM [express] GET /api/users 200 in 172ms :: [{"id":"29751c3c-c749-4936-be41-752d6006e5f2","t…
0|navimed  | 11:44:08 PM [express] GET /api/vital-signs 404 in 57ms :: {"message":"API endpoint not found","path":…
0|navimed  | 11:44:10 PM [express] GET /api/vital-signs 404 in 55ms :: {"message":"API endpoint not found","path":…
0|navimed  | 11:44:14 PM [express] GET /api/vital-signs 404 in 55ms :: {"message":"API endpoint not found","path":…
0|navimed  | 11:44:31 PM [express] POST /api/appointments 403 in 1ms :: {"error":"CSRF token required. Obtain toke…

[root@mail NaviMed]# 