const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B4rk5nfq.js","assets/index-B9YgwmBK.css"])))=>i.map(i=>d[i]);
import{as as $e,w as Ee,x as Me,r as h,u as Ve,at as qe,au as Be,av as Ge,aw as W,ax as J,ay as k,a as Ue,b as He,c as Oe,j as e,az as I,h as i,ai as _,C as u,g as p,s as X,am as A,aA as Z,aB as ze,t as ee,aC as se,ap as Ke,A as Ye,D as Qe,E as b,aD as We,J as te,d as ae,e as re,f as ne,K as Je,I as Xe,N as $,O as E,Q as M,V,W as l,X as q,Y as B,Z as w,_ as a,$ as G,a0 as r,a1 as j,a3 as ie,ar as le,a6 as ce,a7 as de,a8 as oe,a9 as me,aa as xe,ab as o,aE as U,ac as he,F as Ze,i as g,k as v,l as f,m as y,n as S,aF as ue,aG as pe,aH as R,an as je,aI as ge,aJ as ve,p as H,aK as es}from"./index-B4rk5nfq.js";function ts(){const{user:fe,token:O}=$e();Ee(),Me();const[D,ye]=h.useState(""),[P,Ne]=h.useState("all"),[n,L]=h.useState(null);h.useState(null);const[be,C]=h.useState(!1),[T,we]=h.useState(null),[Ce,z]=h.useState(!1),{toast:c}=Ve(),Re=qe(),{data:K=[],isLoading:De}=Be({queryKey:["/api/reports"],staleTime:3e4}),Te=Ge({reportType:W(["laboratory_summary","critical_values","quality_control","performance_metrics"],{required_error:"Please select a report type"}),dateFrom:J({required_error:"Start date is required"}),dateTo:J({required_error:"End date is required"}),format:W(["pdf","excel","csv"],{required_error:"Please select a format"}),includePatientData:k().default(!1),includeTestResults:k().default(!0),includeStatistics:k().default(!1)}).refine(s=>s.dateTo>=s.dateFrom,{message:"End date must be after start date",path:["dateTo"]}),d=Ue({resolver:He(Te),defaultValues:{reportType:"laboratory_summary",format:"pdf",includePatientData:!1,includeTestResults:!0,includeStatistics:!1,dateFrom:new Date(Date.now()-30*24*60*60*1e3),dateTo:new Date}}),F=Oe({mutationFn:async s=>{const{apiRequest:t}=await es(async()=>{const{apiRequest:x}=await import("./index-B4rk5nfq.js").then(m=>m.dd);return{apiRequest:x}},__vite__mapDeps([0,1]));return t("/api/reports",{method:"POST",body:{type:s.reportType,format:s.format,title:`Laboratory ${s.reportType.replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase())} Report - ${R(s.dateFrom,"MMM dd")} to ${R(s.dateTo,"MMM dd, yyyy")}`}})},onSuccess:s=>{const t=s.report;we(t),z(!0),c({title:"Report Generated Successfully",description:"Your report has been generated and is ready for download.",variant:"default"}),C(!1),d.reset(),Re.invalidateQueries({queryKey:["/api/reports"]})},onError:s=>{c({title:"Report Generation Failed",description:(s==null?void 0:s.message)||"An error occurred while generating the report. Please try again.",variant:"destructive"})}}),Se=s=>{F.mutate(s)},Y=async s=>{if(!s.fileUrl||!s.fileName){c({title:"Download Error",description:"Report file URL or filename not available",variant:"destructive"});return}if(!fe||!O){c({title:"Authentication Error",description:"You must be logged in to download reports",variant:"destructive"});return}try{const t=c({title:"Starting Download",description:`Preparing ${s.title} for download...`,variant:"default"}),x=`/api/reports/download/${s.id}/${s.fileName}`,m=await fetch(x,{method:"GET",headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"}});if(!m.ok)if(m.status===401){c({title:"Authentication Failed",description:"Your session has expired. Please log in again.",variant:"destructive"});return}else if(m.status===403){c({title:"Access Denied",description:"You don't have permission to download this report.",variant:"destructive"});return}else if(m.status===404){c({title:"Report Not Found",description:"The requested report could not be found.",variant:"destructive"});return}else throw new Error(`Server error: ${m.status}`);const Ae=await m.blob(),Q=window.URL.createObjectURL(Ae),N=document.createElement("a");N.href=Q,N.download=s.fileName,N.style.display="none",document.body.appendChild(N),N.click(),document.body.removeChild(N),window.URL.revokeObjectURL(Q),c({title:"Download Started",description:`Successfully downloading ${s.title}`,variant:"default"})}catch(t){console.error("Download error:",t),c({title:"Download Failed",description:(t==null?void 0:t.message)||"An error occurred while downloading the report. Please try again.",variant:"destructive"})}},Pe=s=>R(new Date(s),"MMM dd, yyyy HH:mm"),Le=[{id:"1",resultId:"RES-2025-001",testName:"Complete Blood Count",sampleId:"LAB-2025-001",patientName:"Sarah Johnson",patientId:"P001",testDate:"2025-08-25",completedDate:"2025-08-25 10:30",status:"pending_review",priority:"routine",technician:"Tech Williams",results:[{parameter:"WBC",value:"7.2",unit:"K/uL",referenceRange:"4.0-11.0",status:"normal"},{parameter:"RBC",value:"4.6",unit:"M/uL",referenceRange:"4.2-5.4",status:"normal"},{parameter:"Hemoglobin",value:"14.2",unit:"g/dL",referenceRange:"12.0-16.0",status:"normal"},{parameter:"Hematocrit",value:"42.1",unit:"%",referenceRange:"36.0-46.0",status:"normal"},{parameter:"Platelets",value:"285",unit:"K/uL",referenceRange:"150-450",status:"normal"}],criticalValues:!1,distributionMethod:"email",recipientInfo:{physician:"Dr. Smith",clinic:"Primary Care Clinic",contact:"dr.smith@primarycare.com"}},{id:"2",resultId:"RES-2025-002",testName:"Comprehensive Metabolic Panel",sampleId:"LAB-2025-002",patientName:"Michael Davis",patientId:"P002",testDate:"2025-08-25",completedDate:"2025-08-25 11:15",status:"critical",priority:"urgent",technician:"Tech Brown",results:[{parameter:"Glucose",value:"385",unit:"mg/dL",referenceRange:"70-100",flag:"critical",status:"critical"},{parameter:"Creatinine",value:"2.8",unit:"mg/dL",referenceRange:"0.7-1.3",flag:"high",status:"abnormal"},{parameter:"Potassium",value:"5.9",unit:"mEq/L",referenceRange:"3.5-5.1",flag:"critical",status:"critical"},{parameter:"Sodium",value:"138",unit:"mEq/L",referenceRange:"136-145",status:"normal"}],criticalValues:!0,distributionMethod:"phone",recipientInfo:{physician:"Dr. Wilson",clinic:"Emergency Department",contact:"555-0123"}},{id:"3",resultId:"RES-2025-003",testName:"Lipid Panel",sampleId:"LAB-2025-003",patientName:"Emily Chen",patientId:"P003",testDate:"2025-08-25",completedDate:"2025-08-25 09:45",status:"approved",priority:"routine",technician:"Tech Johnson",reviewedBy:"Dr. Lab Director",results:[{parameter:"Total Cholesterol",value:"195",unit:"mg/dL",referenceRange:"<200",status:"normal"},{parameter:"HDL Cholesterol",value:"45",unit:"mg/dL",referenceRange:">40",status:"normal"},{parameter:"LDL Cholesterol",value:"125",unit:"mg/dL",referenceRange:"<130",status:"normal"},{parameter:"Triglycerides",value:"125",unit:"mg/dL",referenceRange:"<150",status:"normal"}],criticalValues:!1,distributionMethod:"email",recipientInfo:{physician:"Dr. Chen",clinic:"Cardiology Associates",contact:"dr.chen@cardiology.com"},reportGenerated:"2025-08-25 12:00"}],Fe=s=>{switch(s){case"pending_review":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"critical":return"bg-red-100 text-red-800";case"distributed":return"bg-blue-100 text-blue-800";case"amended":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},ke=s=>{switch(s){case"stat":return"bg-red-100 text-red-800";case"urgent":return"bg-orange-100 text-orange-800";case"routine":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Ie=s=>{switch(s){case"normal":return"text-green-700";case"abnormal":return"text-yellow-700";case"critical":return"text-red-700";default:return"text-gray-700"}},_e=Le.filter(s=>{const t=s.testName.toLowerCase().includes(D.toLowerCase())||s.sampleId.toLowerCase().includes(D.toLowerCase())||s.patientName.toLowerCase().includes(D.toLowerCase()),x=P==="all"||s.status===P;return t&&x});return e.jsxs("div",{className:"p-6 space-y-6","data-testid":"lab-results-reporting",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(I,{className:"h-8 w-8 mr-3 text-green-600"}),"Results & Reporting"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive result management and distribution system"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(i,{className:"bg-green-600 hover:bg-green-700",onClick:()=>C(!0),"data-testid":"button-generate-report",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(u,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:"12"}),e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Awaiting approval"})]}),e.jsx(X,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Critical Values"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:"3"}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Require immediate attention"})]}),e.jsx(A,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Reports Sent Today"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"89"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"+15% vs yesterday"})]}),e.jsx(Z,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. TAT"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"4.2h"}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Within target"})]}),e.jsx(ze,{className:"h-8 w-8 text-blue-600"})]})})})]}),Ce&&T&&e.jsx(u,{className:"bg-green-50 border-green-200","data-testid":"download-banner",children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(ee,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900","data-testid":"text-report-ready",children:"Your report is ready!"}),e.jsxs("p",{className:"text-green-700","data-testid":"text-report-title",children:[T.title," (",T.format.toUpperCase(),")"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(i,{onClick:()=>Y(T),className:"bg-green-600 hover:bg-green-700","data-testid":"button-download-report",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Download Report"]}),e.jsx(i,{variant:"outline",onClick:()=>z(!1),"data-testid":"button-dismiss-banner",children:e.jsx(Ke,{className:"h-4 w-4"})})]})]})})}),e.jsxs(Ye,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(Qe,{children:[e.jsxs(b,{value:"pending",className:"flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Pending Results"]}),e.jsxs(b,{value:"approved",className:"flex items-center",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Approved Reports"]}),e.jsxs(b,{value:"critical",className:"flex items-center",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Critical Values"]}),e.jsxs(b,{value:"distribution",className:"flex items-center",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Distribution"]}),e.jsxs(b,{value:"analytics",className:"flex items-center",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Analytics"]}),e.jsxs(b,{value:"reports",className:"flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Recent Reports"]})]}),e.jsx(te,{value:"pending",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(ae,{children:[e.jsx(re,{children:"Results Pending Review"}),e.jsx(ne,{children:"Review and approve test results before distribution"})]}),e.jsxs(p,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Xe,{placeholder:"Search results, samples, or patients...",value:D,onChange:s=>ye(s.target.value),className:"pl-10","data-testid":"input-search-results"})]}),e.jsxs($,{value:P,onValueChange:Ne,children:[e.jsx(E,{className:"w-48",children:e.jsx(M,{placeholder:"Filter by status"})}),e.jsxs(V,{children:[e.jsx(l,{value:"all",children:"All Statuses"}),e.jsx(l,{value:"pending_review",children:"Pending Review"}),e.jsx(l,{value:"approved",children:"Approved"}),e.jsx(l,{value:"critical",children:"Critical"}),e.jsx(l,{value:"distributed",children:"Distributed"})]})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(q,{children:[e.jsx(B,{children:e.jsxs(w,{children:[e.jsx(a,{children:"Result ID"}),e.jsx(a,{children:"Test"}),e.jsx(a,{children:"Patient"}),e.jsx(a,{children:"Completed"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Priority"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(G,{children:_e.map(s=>e.jsxs(w,{"data-testid":`row-result-${s.id}`,children:[e.jsx(r,{className:"font-medium",children:s.resultId}),e.jsx(r,{children:s.testName}),e.jsx(r,{children:s.patientName}),e.jsx(r,{children:s.completedDate}),e.jsx(r,{children:e.jsx(j,{className:Fe(s.status),children:s.status})}),e.jsx(r,{children:e.jsx(j,{className:ke(s.priority),children:s.priority})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>L(s),"data-testid":`button-view-${s.id}`,children:e.jsx(ie,{className:"h-4 w-4"})}),s.status==="pending_review"&&e.jsx(i,{variant:"outline",size:"sm",className:"text-green-600","data-testid":`button-approve-${s.id}`,children:e.jsx(le,{className:"h-4 w-4"})}),s.criticalValues&&e.jsx(i,{variant:"outline",size:"sm",className:"text-red-600","data-testid":`button-critical-${s.id}`,children:e.jsx(A,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})]})}),e.jsx(te,{value:"reports",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(ae,{children:[e.jsx(re,{children:"Recent Reports"}),e.jsx(ne,{children:"View and download your generated laboratory reports"})]}),e.jsx(p,{children:De?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading reports..."})]})}):K.length===0?e.jsxs("div",{className:"text-center py-8","data-testid":"no-reports-message",children:[e.jsx(I,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reports generated yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Generate your first laboratory report to see it here."}),e.jsxs(i,{onClick:()=>C(!0),className:"bg-green-600 hover:bg-green-700","data-testid":"button-generate-first-report",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(q,{children:[e.jsx(B,{children:e.jsxs(w,{children:[e.jsx(a,{children:"Report Title"}),e.jsx(a,{children:"Type"}),e.jsx(a,{children:"Format"}),e.jsx(a,{children:"Generated Date"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(G,{children:K.map(s=>e.jsxs(w,{"data-testid":`row-report-${s.id}`,children:[e.jsx(r,{className:"font-medium","data-testid":`text-report-title-${s.id}`,children:s.title}),e.jsx(r,{"data-testid":`text-report-type-${s.id}`,children:e.jsx(j,{variant:"outline",children:s.type.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())})}),e.jsx(r,{"data-testid":`text-report-format-${s.id}`,children:e.jsx(j,{variant:"secondary",children:s.format.toUpperCase()})}),e.jsx(r,{"data-testid":`text-report-date-${s.id}`,children:Pe(s.createdAt)}),e.jsx(r,{"data-testid":`text-report-status-${s.id}`,children:e.jsx(j,{variant:s.status==="completed"?"default":"secondary",className:s.status==="completed"?"bg-green-100 text-green-800":"",children:s.status})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>Y(s),disabled:!s.fileUrl,"data-testid":`button-download-${s.id}`,children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"Download"]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{c({title:"Report Details",description:`Report ID: ${s.id}
Generated by: ${s.generatedBy}`,variant:"default"})},"data-testid":`button-view-details-${s.id}`,children:e.jsx(ie,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})})]}),e.jsx(ce,{open:!!n,onOpenChange:()=>L(null),children:e.jsxs(de,{className:"max-w-4xl",children:[e.jsxs(oe,{children:[e.jsx(me,{children:"Result Details"}),e.jsxs(xe,{children:["Complete result information for ",n==null?void 0:n.testName]})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Result ID"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.resultId})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Test Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.testName})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Patient"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.patientName})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Sample ID"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.sampleId})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Completed Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.completedDate})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Technician"}),e.jsx("p",{className:"text-sm text-gray-900",children:n.technician})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-3 block",children:"Test Results"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(q,{children:[e.jsx(B,{children:e.jsxs(w,{children:[e.jsx(a,{children:"Parameter"}),e.jsx(a,{children:"Value"}),e.jsx(a,{children:"Unit"}),e.jsx(a,{children:"Reference Range"}),e.jsx(a,{children:"Status"})]})}),e.jsx(G,{children:n.results.map((s,t)=>e.jsxs(w,{children:[e.jsx(r,{className:"font-medium",children:s.parameter}),e.jsx(r,{className:U("font-bold",Ie(s.status)),children:s.value}),e.jsx(r,{children:s.unit}),e.jsx(r,{children:s.referenceRange}),e.jsx(r,{children:e.jsx(j,{className:s.status==="normal"?"bg-green-100 text-green-800":s.status==="abnormal"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:s.flag?s.flag.toUpperCase():s.status})})]},t))})]})})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-3 block",children:"Distribution Information"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Physician:"}),e.jsx("p",{className:"font-medium",children:n.recipientInfo.physician})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Clinic:"}),e.jsx("p",{className:"font-medium",children:n.recipientInfo.clinic})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Contact:"}),e.jsx("p",{className:"font-medium",children:n.recipientInfo.contact})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Method:"}),e.jsx(j,{variant:"outline",children:n.distributionMethod})]})]})]})]}),e.jsxs(he,{children:[e.jsx(i,{variant:"outline",onClick:()=>L(null),children:"Close"}),e.jsxs(i,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Approve & Send"]})]})]})}),e.jsx(ce,{open:be,onOpenChange:C,children:e.jsxs(de,{className:"max-w-2xl",children:[e.jsxs(oe,{children:[e.jsx(me,{children:"Generate Laboratory Report"}),e.jsx(xe,{children:"Configure your report parameters and generate comprehensive laboratory reports"})]}),e.jsx(Ze,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(Se),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(g,{control:d.control,name:"reportType",render:({field:s})=>e.jsxs(v,{children:[e.jsx(f,{children:"Report Type"}),e.jsxs($,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(y,{children:e.jsx(E,{"data-testid":"select-report-type",children:e.jsx(M,{placeholder:"Select report type"})})}),e.jsxs(V,{children:[e.jsx(l,{value:"laboratory_summary",children:"Laboratory Summary"}),e.jsx(l,{value:"critical_values",children:"Critical Values"}),e.jsx(l,{value:"quality_control",children:"Quality Control"}),e.jsx(l,{value:"performance_metrics",children:"Performance Metrics"})]})]}),e.jsx(S,{})]})}),e.jsx(g,{control:d.control,name:"format",render:({field:s})=>e.jsxs(v,{children:[e.jsx(f,{children:"Format"}),e.jsxs($,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(y,{children:e.jsx(E,{"data-testid":"select-report-format",children:e.jsx(M,{placeholder:"Select format"})})}),e.jsxs(V,{children:[e.jsx(l,{value:"pdf",children:"PDF"}),e.jsx(l,{value:"excel",children:"Excel"}),e.jsx(l,{value:"csv",children:"CSV"})]})]}),e.jsx(S,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(g,{control:d.control,name:"dateFrom",render:({field:s})=>e.jsxs(v,{className:"flex flex-col",children:[e.jsx(f,{children:"From Date"}),e.jsxs(ue,{children:[e.jsx(pe,{asChild:!0,children:e.jsx(y,{children:e.jsxs(i,{variant:"outline",className:U("pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),"data-testid":"input-date-from",children:[s.value?R(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(je,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ge,{className:"w-auto p-0",align:"start",children:e.jsx(ve,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:t=>t>new Date||t<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(S,{})]})}),e.jsx(g,{control:d.control,name:"dateTo",render:({field:s})=>e.jsxs(v,{className:"flex flex-col",children:[e.jsx(f,{children:"To Date"}),e.jsxs(ue,{children:[e.jsx(pe,{asChild:!0,children:e.jsx(y,{children:e.jsxs(i,{variant:"outline",className:U("pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),"data-testid":"input-date-to",children:[s.value?R(s.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(je,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ge,{className:"w-auto p-0",align:"start",children:e.jsx(ve,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:t=>t>new Date||t<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(S,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{className:"text-base font-medium",children:"Include Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(g,{control:d.control,name:"includePatientData",render:({field:s})=>e.jsxs(v,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(H,{checked:s.value,onCheckedChange:s.onChange,"data-testid":"checkbox-patient-data"})}),e.jsx("div",{className:"space-y-1 leading-none",children:e.jsx(f,{children:"Patient Data"})})]})}),e.jsx(g,{control:d.control,name:"includeTestResults",render:({field:s})=>e.jsxs(v,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(H,{checked:s.value,onCheckedChange:s.onChange,"data-testid":"checkbox-test-results"})}),e.jsx("div",{className:"space-y-1 leading-none",children:e.jsx(f,{children:"Test Results"})})]})}),e.jsx(g,{control:d.control,name:"includeStatistics",render:({field:s})=>e.jsxs(v,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(H,{checked:s.value,onCheckedChange:s.onChange,"data-testid":"checkbox-statistics"})}),e.jsx("div",{className:"space-y-1 leading-none",children:e.jsx(f,{children:"Statistics"})})]})})]})]}),e.jsxs(he,{children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>C(!1),"data-testid":"button-cancel-report",children:"Cancel"}),e.jsx(i,{type:"submit",disabled:F.isPending,className:"bg-green-600 hover:bg-green-700","data-testid":"button-submit-report",children:F.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]})})]})})]})}export{ts as default};
