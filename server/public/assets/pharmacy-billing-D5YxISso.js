import{r as p,au as R,j as e,h as g,aC as k,ai as h,C as r,d,e as x,bn as Q,g as o,bQ as V,bL as H,f as E,I as q,N as y,O as f,Q as v,V as C,W as a,X as z,Y as G,Z as b,_ as l,$ as K,a0 as c,a1 as w}from"./index-B4rk5nfq.js";function W(){const[m,S]=p.useState(""),[j,T]=p.useState("all"),[u,P]=p.useState("all"),{data:n=[],isLoading:O}=R({queryKey:["/api/pharmacy/billing"],staleTime:3e4}),F=s=>{const t={completed:{color:"bg-green-100 text-green-800",text:"Completed"},pending:{color:"bg-yellow-100 text-yellow-800",text:"Pending"},failed:{color:"bg-red-100 text-red-800",text:"Failed"}},i=t[s]||t.completed;return e.jsx(w,{className:i.color,children:i.text})},D=s=>{if(!s)return null;const i={submitted:{color:"bg-blue-100 text-blue-800",text:"Submitted"},approved:{color:"bg-green-100 text-green-800",text:"Approved"},denied:{color:"bg-red-100 text-red-800",text:"Denied"},processing:{color:"bg-yellow-100 text-yellow-800",text:"Processing"}}[s];return i?e.jsx(w,{className:i.color,children:i.text}):null},I=s=>({cash:"ðŸ’µ Cash",card:"ðŸ’³ Card",insurance:"ðŸ¥ Insurance",check:"ðŸ“„ Check"})[s]||s,N=n.filter(s=>{const t=s.customerName.toLowerCase().includes(m.toLowerCase())||s.medicationName.toLowerCase().includes(m.toLowerCase())||s.prescriptionId.toLowerCase().includes(m.toLowerCase()),i=j==="all"||s.status===j,A=u==="all"||s.paymentMethod===u;return t&&i&&A}),L=n.reduce((s,t)=>s+t.totalAmount,0),B=n.reduce((s,t)=>s+t.insuranceClaim,0),M=n.reduce((s,t)=>s+t.patientCopay,0),$=n.filter(s=>s.status==="completed").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Billing & Revenue"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track payments, insurance claims, and financial reporting"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(g,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Export Report"]}),e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),"Generate Invoice"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(r,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Q,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",L.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500",children:"This period"})]})]}),e.jsxs(r,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Insurance Claims"}),e.jsx(h,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",B.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Claimed from insurance"})]})]}),e.jsxs(r,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Patient Payments"}),e.jsx(V,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",M.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Patient copays & direct pay"})]})]}),e.jsxs(r,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Transactions"}),e.jsx(H,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:$}),e.jsx("p",{className:"text-xs text-gray-500",children:"Completed this period"})]})]})]}),e.jsxs(r,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Transaction History"}),e.jsx(E,{children:"View and manage billing transactions"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{placeholder:"Search transactions...",value:m,onChange:s=>S(s.target.value),className:"w-80"}),e.jsxs(y,{value:j,onValueChange:T,children:[e.jsx(f,{className:"w-32",children:e.jsx(v,{placeholder:"Status"})}),e.jsxs(C,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"completed",children:"Completed"}),e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"failed",children:"Failed"})]})]}),e.jsxs(y,{value:u,onValueChange:P,children:[e.jsx(f,{className:"w-32",children:e.jsx(v,{placeholder:"Payment"})}),e.jsxs(C,{children:[e.jsx(a,{value:"all",children:"All Methods"}),e.jsx(a,{value:"cash",children:"Cash"}),e.jsx(a,{value:"card",children:"Card"}),e.jsx(a,{value:"insurance",children:"Insurance"}),e.jsx(a,{value:"check",children:"Check"})]})]})]})]})}),e.jsxs(o,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(z,{children:[e.jsx(G,{children:e.jsxs(b,{children:[e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Customer"}),e.jsx(l,{children:"Prescription"}),e.jsx(l,{children:"Insurance"}),e.jsx(l,{children:"Patient Pay"}),e.jsx(l,{children:"Total"}),e.jsx(l,{children:"Payment"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(K,{children:N.map(s=>e.jsxs(b,{children:[e.jsx(c,{children:e.jsx("div",{className:"text-sm",children:new Date(s.transactionDate).toLocaleDateString()})}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.customerName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.prescriptionId})]})}),e.jsx(c,{children:e.jsx("div",{className:"text-sm",children:s.medicationName})}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium",children:["$",s.insuranceClaim.toFixed(2)]}),s.insuranceProvider&&e.jsx("div",{className:"text-xs text-gray-500",children:s.insuranceProvider}),s.claimStatus&&D(s.claimStatus)]})}),e.jsx(c,{children:e.jsxs("div",{className:"text-sm font-medium",children:["$",s.patientCopay.toFixed(2)]})}),e.jsx(c,{children:e.jsxs("div",{className:"text-sm font-medium",children:["$",s.totalAmount.toFixed(2)]})}),e.jsx(c,{children:e.jsx("div",{className:"text-sm",children:I(s.paymentMethod)})}),e.jsx(c,{children:F(s.status)}),e.jsx(c,{children:e.jsx(g,{variant:"ghost",size:"sm",children:e.jsx(h,{className:"h-4 w-4"})})})]},s.id))})]})}),N.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(h,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No transactions found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filter criteria"})]})]})]})]})}export{W as default};
