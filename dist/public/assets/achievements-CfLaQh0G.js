import{bM as z,d0 as B,u as M,at as U,r as Q,au as o,j as e,C as a,g as l,d1 as r,bI as b,ag as v,ae as N,aj as w,A as S,D as _,E as f,J as u,h as L,d2 as F,a1 as h,d as C,e as T,f as q,d3 as H,bL as J,s as O,U as V,cK as Y,cI as G}from"./index-QVGfb-Vm.js";const j={performance:e.jsx(J,{className:"h-5 w-5"}),quality:e.jsx(b,{className:"h-5 w-5"}),efficiency:e.jsx(O,{className:"h-5 w-5"}),collaboration:e.jsx(V,{className:"h-5 w-5"}),innovation:e.jsx(Y,{className:"h-5 w-5"}),training:e.jsx(G,{className:"h-5 w-5"})},k={performance:"bg-blue-500",quality:"bg-yellow-500",efficiency:"bg-green-500",collaboration:"bg-purple-500",innovation:"bg-orange-500",training:"bg-indigo-500"};function W(){const{user:n}=z(),{tenant:d}=B();M(),U();const[x,y]=Q.useState("all"),{data:i=[],isLoading:P}=o({queryKey:["/api/user-achievements"],enabled:!!n&&!!d}),{data:t,isLoading:D}=o({queryKey:["/api/user-stats"],enabled:!!n&&!!d}),{data:I=[],isLoading:X}=o({queryKey:["/api/activity-logs"],enabled:!!n&&!!d}),{data:K=[],isLoading:Z}=o({queryKey:["/api/leaderboard"],enabled:!!n&&!!d}),m=i.filter(s=>s.completed),p=i.filter(s=>!s.completed&&s.progress>0),g=i.filter(s=>!s.completed&&s.progress===0);x==="all"||i.filter(s=>s.achievement.category===x);const E=Array.from(new Set(i.map(s=>s.achievement.category))),R=s=>Math.floor(s/100)+1,$=s=>R(s)*100-s;return P||D?e.jsx(a,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Loading achievements..."})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{className:"h-8 w-8 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(t==null?void 0:t.level)||1}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Level"})]})]})})}),e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-8 w-8 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(t==null?void 0:t.totalPoints)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Points"})]})]})})}),e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:m.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Achievements"})]})]})})}),e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(t==null?void 0:t.testsCompleted)||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tests Completed"})]})]})})})]}),t&&e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Level ",t.level]}),e.jsxs("span",{children:[$(t.totalPoints)," points to next level"]})]}),e.jsx(w,{value:t.totalPoints%100,className:"w-full"})]})})}),e.jsxs(S,{defaultValue:"achievements",className:"w-full",children:[e.jsxs(_,{className:"grid w-full grid-cols-3",children:[e.jsx(f,{value:"achievements",children:"Achievements"}),e.jsx(f,{value:"leaderboard",children:"Leaderboard"}),e.jsx(f,{value:"activity",children:"Activity"})]}),e.jsxs(u,{value:"achievements",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(L,{variant:x==="all"?"default":"outline",size:"sm",onClick:()=>y("all"),children:"All"}),E.map(s=>e.jsxs(L,{variant:x===s?"default":"outline",size:"sm",onClick:()=>y(s),className:"capitalize",children:[j[s],e.jsx("span",{className:"ml-1",children:s})]},s))]}),e.jsxs("div",{className:"space-y-6",children:[m.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(F,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Completed (",m.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(s=>e.jsx(a,{className:"border-yellow-200 bg-yellow-50",children:e.jsx(l,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:`p-1 rounded-full ${k[s.achievement.category]} text-white`,children:j[s.achievement.category]}),e.jsx(h,{variant:"secondary",className:"bg-yellow-500 text-white",children:s.achievement.badge})]}),e.jsx("h4",{className:"font-semibold",children:s.achievement.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.achievement.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-green-600 font-medium",children:["+",s.achievement.points," points"]}),e.jsx("span",{className:"text-muted-foreground",children:s.completedAt&&new Date(s.completedAt).toLocaleDateString()})]})]})})})},s.id))})]}),p.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(v,{className:"h-5 w-5 mr-2 text-blue-500"}),"In Progress (",p.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(s=>e.jsx(a,{className:"border-blue-200",children:e.jsx(l,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:`p-1 rounded-full ${k[s.achievement.category]} text-white`,children:j[s.achievement.category]}),e.jsx(h,{variant:"outline",children:s.achievement.badge})]}),e.jsx("h4",{className:"font-semibold",children:s.achievement.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.achievement.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"/",s.achievement.requirement]})]}),e.jsx(w,{value:s.progress/s.achievement.requirement*100})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs mt-2",children:[e.jsxs("span",{className:"text-blue-600 font-medium",children:["+",s.achievement.points," points"]}),e.jsxs("span",{className:"text-muted-foreground",children:[Math.round(s.progress/s.achievement.requirement*100),"% complete"]})]})]})})})},s.id))})]}),g.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(r,{className:"h-5 w-5 mr-2 text-gray-500"}),"Available (",g.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(s=>e.jsx(a,{className:"border-gray-200",children:e.jsx(l,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"p-1 rounded-full bg-gray-400 text-white",children:j[s.achievement.category]}),e.jsx(h,{variant:"outline",children:s.achievement.badge})]}),e.jsx("h4",{className:"font-semibold text-gray-700",children:s.achievement.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.achievement.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:["+",s.achievement.points," points"]}),e.jsxs("span",{className:"text-muted-foreground",children:["Requirement: ",s.achievement.requirement]})]})]})})})},s.id))})]})]})]}),e.jsx(u,{value:"leaderboard",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(C,{children:[e.jsxs(T,{className:"flex items-center",children:[e.jsx(r,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Laboratory Leaderboard"]}),e.jsx(q,{children:"Top performers in your laboratory"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:K.map((s,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full font-bold text-white ${c===0?"bg-yellow-500":c===1?"bg-gray-400":c===2?"bg-orange-600":"bg-gray-600"}`,children:s.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.userName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Level ",s.level]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-blue-600",children:[s.points," pts"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.testsCompleted," tests"]})]})]},s.userId))})})]})}),e.jsx(u,{value:"activity",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(C,{children:[e.jsxs(T,{className:"flex items-center",children:[e.jsx(N,{className:"h-5 w-5 mr-2 text-blue-500"}),"Recent Activity"]}),e.jsx(q,{children:"Your latest laboratory achievements and activities"})]}),e.jsx(l,{children:e.jsx(H,{className:"h-96",children:e.jsx("div",{className:"space-y-3",children:I.map(s=>{var c;return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-blue-100",children:e.jsx(N,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.activityType==="lab_test_completed"?"Lab Test Completed":s.activityType}),e.jsx("p",{className:"text-sm text-muted-foreground",children:((c=s.metadata)==null?void 0:c.testName)&&`Test: ${s.metadata.testName}`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleString()})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs(h,{variant:"secondary",className:"bg-green-100 text-green-800",children:["+",s.points," pts"]})})]},s.id)})})})})]})})]})]})}function ee(){return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center",children:[e.jsx(r,{className:"h-8 w-8 mr-3 text-yellow-500"}),"Laboratory Achievements"]}),e.jsx("p",{className:"text-muted-foreground",children:"Track your laboratory performance, earn achievements, and compete with your colleagues"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-blue-100",children:e.jsx(v,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Performance Tracking"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic tracking of test completion, quality scores, and efficiency metrics"})]})]})})}),e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-yellow-100",children:e.jsx(b,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Achievement Rewards"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Earn points, badges, and level up as you complete laboratory tests"})]})]})})}),e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-green-100",children:e.jsx(r,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Team Competition"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compete with colleagues on the leaderboard for best performance"})]})]})})})]}),e.jsx(W,{})]})}export{ee as default};
