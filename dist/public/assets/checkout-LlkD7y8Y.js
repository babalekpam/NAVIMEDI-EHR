import{r as i,u as y,cg as j,j as e,C as d,g as m,d as u,e as p,f as h,h as g,d6 as f,d7 as b,d8 as N,d9 as v,da as S}from"./index-QVGfb-Vm.js";const x=f("pk_live_51IGTenIOOGo5yxk3MsJtzIZrryk7cjsYdlxt3IOndCNUnAcgkyf4vUHEOxDF6tZg5rYHN9cam5uYYkuaJdfFIke800vrpXeFMZ"),w=()=>{const s=N(),a=v(),{toast:c}=y(),[r,n]=i.useState(!1),l=async o=>{if(o.preventDefault(),!s||!a)return;n(!0);const{error:t}=await s.confirmPayment({elements:a,confirmParams:{return_url:window.location.origin+"/payment-success"}});n(!1),c(t?{title:"Payment Failed",description:t.message,variant:"destructive"}:{title:"Payment Successful",description:"Thank you for your purchase!"})};return e.jsxs(d,{className:"w-full max-w-md mx-auto",children:[e.jsxs(u,{children:[e.jsx(p,{children:"Complete Payment - $50.00"}),e.jsx(h,{children:"Secure payment processing for healthcare services"})]}),e.jsx(m,{children:e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx("div",{className:"p-4 border rounded-lg bg-gray-50",children:e.jsx(S,{})}),e.jsx(g,{type:"submit",disabled:!s||r,className:"w-full","data-testid":"button-submit-payment",children:r?"Processing...":"Pay $50.00"})]})})]})},P=({clientSecret:s})=>{if(!x||!s)return e.jsx(d,{className:"w-full max-w-md mx-auto",children:e.jsxs(u,{children:[e.jsx(p,{children:"Payment Setup Error"}),e.jsx(h,{children:"Unable to initialize payment system"})]})});const a={clientSecret:s,appearance:{theme:"stripe"}};return e.jsx(b,{stripe:x,options:a,children:e.jsx(w,{})})};function C(){const[s,a]=i.useState(""),[c,r]=i.useState(!0),[n,l]=i.useState(""),{toast:o}=y();return i.useEffect(()=>{if(!x){l("Stripe payment processing is not configured. Please contact administrator."),r(!1);return}j("/api/create-payment-intent",{method:"POST",body:{amount:50}}).then(t=>{if(console.log("✅ Payment intent response:",t),t.clientSecret)a(t.clientSecret);else throw new Error("No client secret received")}).catch(t=>{console.error("❌ Payment setup failed:",t),l("Unable to set up payment. Please try again."),o({title:"Payment Setup Error",description:"Unable to initialize payment processing",variant:"destructive"})}).finally(()=>{r(!1)})},[o]),c?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Healthcare Services Payment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Setting up secure payment processing..."})]}),e.jsx(d,{className:"w-full max-w-md mx-auto",children:e.jsxs(m,{className:"flex justify-center items-center p-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Preparing payment..."})]})})]})}):n?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs(d,{className:"w-full max-w-md mx-auto",children:[e.jsxs(u,{children:[e.jsx(p,{children:"Payment Unavailable"}),e.jsx(h,{children:n})]}),e.jsx(m,{children:e.jsx(g,{onClick:()=>window.location.reload(),className:"w-full",children:"Try Again"})})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Healthcare Services Payment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Secure payment processing for your healthcare needs"})]}),s&&e.jsx(P,{clientSecret:s})]})})}export{C as default};
