import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';

// Basic translation dictionary for instant translation
const translations = {
  en: {
    // Navigation
    dashboard: 'Dashboard',
    patients: 'Patients',
    appointments: 'Appointments',
    prescriptions: 'Prescriptions',
    'pharmacy-dashboard': 'Pharmacy Dashboard',
    billing: 'Billing',
    'lab-orders': 'Lab Orders',
    'health-recommendations': 'AI Health Insights',
    'medical-communications': 'Medical Communications',
    'user-roles': 'User Roles',
    'tenant-management': 'Tenant Management',
    'audit-logs': 'Audit Logs',
    'white-label-settings': 'White Label Settings',
    'offline-mode': 'Offline Mode',
    'trial-status': 'Trial Status',
    reports: 'Reports',
    // Common UI
    save: 'Save',
    cancel: 'Cancel',
    edit: 'Edit',
    delete: 'Delete',
    add: 'Add',
    search: 'Search',
    filter: 'Filter',
    loading: 'Loading...',
    'no-data': 'No data available',
    'view-all': 'View All',
    'view-details': 'View Details',
    close: 'Close',
    submit: 'Submit',
    'try-again': 'Try Again',
    refresh: 'Refresh',
    // Healthcare specific
    'patient-name': 'Patient Name',
    'date-of-birth': 'Date of Birth',
    'medical-record': 'Medical Record',
    'insurance-info': 'Insurance Information',
    'vital-signs': 'Vital Signs',
    // Dashboard
    'total-patients': 'Total Patients',
    'pending-appointments': 'Pending Appointments',
    'active-prescriptions': 'Active Prescriptions',
    'recent-activity': 'Recent Activity',
    'platform-overview': 'Platform Overview',
    'system-health': 'System Health',
    'active-tenants': 'Active Tenants',
    'total-tenants': 'Total Tenants',
    'monthly-revenue': 'Monthly Revenue',
    'growth-rate': 'Growth Rate',
    'welcome-back': 'Welcome back',
    'quick-stats': 'Quick Stats',
    // Profile & Settings
    'profile-settings': 'Profile Settings',
    'account-preferences': 'Account Preferences',
    'notification-settings': 'Notification Settings',
    'display-language': 'Display & Language',
    'security-privacy': 'Security & Privacy',
    'save-preferences': 'Save Preferences',
    'language': 'Language',
    'timezone': 'Timezone',
    'theme': 'Theme',
    // Forms and Actions
    'first-name': 'First Name',
    'last-name': 'Last Name',
    'email': 'Email',
    'phone': 'Phone',
    'address': 'Address',
    'create': 'Create',
    'update': 'Update',
    'confirm': 'Confirm',
    'back': 'Back',
    'next': 'Next',
    'previous': 'Previous',
    'my-account': 'My Account',
    'sign-out': 'Sign Out',
    // Platform specific
    'uptime': 'Uptime',
    'api-response-time': 'API Response Time',
    'data-storage': 'Data Storage',
    'current': 'Current',
    'average': 'Average',
    'total-used': 'Total used',
    'recent-tenant-activity': 'Recent Tenant Activity',
    'latest-activities': 'Latest activities across all healthcare organizations',
    'system-healthy': 'System Healthy',
    'subscription-income': 'Subscription income',
    'cross-platform-data': 'Cross-platform data',
    'all-tenants': 'All tenants',
    'last-updated': 'Last updated',
    'min-ago': 'min ago',
    'new-patient-registration': 'New patient registration',
    'prescription-processed': 'Prescription processed',
    'lab-results-uploaded': 'Lab results uploaded',
    'insurance-claim-submitted': 'Insurance claim submitted',
    'appointment-scheduled': 'Appointment scheduled',
    'minutes-ago': 'minutes ago',
    'total-subscriptions': 'Total Subscriptions',
    'all-active-plans': 'All active plans',
    'organization-types': 'Organization Types',
    'distribution-healthcare-orgs': 'Distribution of healthcare organizations on the platform',
    'platform-performance-metrics': 'Platform performance and reliability metrics',
    'system-uptime': 'System Uptime',
    'last-30-days': 'Last 30 days',
    'active-sessions': 'Active Sessions',
    // Time related
    '2-minutes-ago': '2 minutes ago',
    '5-minutes-ago': '5 minutes ago',
    '8-minutes-ago': '8 minutes ago',
    '12-minutes-ago': '12 minutes ago',
    '15-minutes-ago': '15 minutes ago',
    // Healthcare organizations
    'hospitals': 'Hospitals',
    'hospital': 'Hospital',
    'pharmacies': 'Pharmacies',
    'laboratories': 'Laboratories', 
    'clinics': 'Clinics',
    'insurance': 'Insurance',
    'insurance-claims': 'Insurance Claims',
    'insurance-provider': 'Insurance Provider',
    // Organization types
    'pharmacy': 'Pharmacy',
    'laboratory': 'Laboratory',
    'clinic': 'Clinic',
    'dental_clinic': 'Dental Clinic',
    'medical_center': 'Medical Center',
    'healthcare_system': 'Healthcare System',
    // Page Titles and Navigation (consolidated with existing)
    'manage-patient-records': 'Manage patient information and medical records',
    'schedule-manage-appointments': 'Manage patient appointments and scheduling',
    'manage-prescriptions-medications': 'Manage patient prescriptions and medications',
    'recent-patient-activity': 'Recent Patient Activity',
    'add-patient': 'Add Patient',
    'add-appointment': 'Add Appointment',
    'search-patients': 'Search patients...',
    'no-patients-found': 'No patients found',
    'no-patients-match-search': 'No patients match your search criteria',
    'get-started-add-first-patient': 'Get started by adding your first patient',
    'add-prescription': 'Add Prescription',
    'access-denied': 'Access Denied',
    'no-permission-tenant-management': "You don't have permission to access tenant management.",
    'manage-healthcare-organizations': 'Manage healthcare organizations and multi-tenant access',
    'add-organization': 'Add Organization',
    'manage-healthcare-team-permissions': 'Manage healthcare team members and their access permissions',
    'add-user': 'Add User',
    'comprehensive-audit-trail': 'Comprehensive audit trail for all healthcare data access and modifications',
    'hipaa-compliant': 'HIPAA Compliant',
    'create-new-organization': 'Create New Organization',
    'organization-name': 'Organization Name',
    'enter-organization-name': 'Enter organization name',
    'organization-type': 'Organization Type',
    'select-type': 'Select type',
    'hospital': 'Hospital',
    'clinic': 'Clinic',
    'pharmacy': 'Pharmacy',
    'laboratory': 'Laboratory',
    'insurance-provider': 'Insurance Provider',
    'edit-user': 'Edit User',
    'create-new-user': 'Create New User',
    'update-user-info-role': 'Update user information and role',
    'add-new-team-member': 'Add a new team member to your healthcare organization',
    'username': 'Username',
    'enter-username': 'Enter username',
    'enter-email': 'Enter email',
    'enter-first-name': 'Enter first name',
    'hipaa-compliance-status': 'HIPAA Compliance Status',
    'current-compliance-metrics': 'Current compliance metrics and audit trail summary',
    'data-encrypted': 'Data Encrypted',
    'audit-entries': 'Audit Entries',
    'security-violations': 'Security Violations',
    'monitoring': 'Monitoring',
    'audit-log-filters': 'Audit Log Filters',
    'search-entity-action-user': 'Search by entity, action, or user...',
    'search-appointments': 'Search appointments...',
    'search-prescriptions': 'Search prescriptions...',
    'no-appointments-found': 'No appointments found', 
    'no-prescriptions-found': 'No prescriptions found',
    'view-details': 'View Details',
    'schedule-appointment': 'Schedule Appointment',
    'view-ehr': 'View EHR',
    'patient-information': 'Patient Information',
    'appointment-details': 'Appointment Details',
    'prescription-details': 'Prescription Details',
    'date-of-birth': 'Date of Birth',
    'gender': 'Gender',
    'address': 'Address',
    'emergency-contact': 'Emergency Contact',
    'medical-history': 'Medical History',
    'medication': 'Medication',
    'dosage': 'Dosage',
    'frequency': 'Frequency',
    'prescribed-by': 'Prescribed By',
    'prescribed-date': 'Prescribed Date',
    'appointment-date': 'Appointment Date',
    'appointment-time': 'Appointment Time',
    'provider': 'Provider',
    'patient': 'Patient',
    'reason': 'Reason',
    'notes': 'Notes',
    'age': 'Age',
    'years': 'years',
    'male': 'Male',
    'female': 'Female',
    'other': 'Other',
    // Status labels
    'scheduled': 'Scheduled',
    'confirmed': 'Confirmed',
    'checked-in': 'Checked In',
    'in-progress': 'In Progress',
    'completed': 'Completed',
    'cancelled': 'Cancelled',
    'no-show': 'No Show',
    'prescribed': 'Prescribed',
    'sent-to-pharmacy': 'Sent to Pharmacy',
    'filled': 'Filled',
    'picked-up': 'Picked Up',
    'filter-by-status': 'Filter by Status',
    'filter-by-date': 'Filter by Date',
    'today': 'Today',
    'tomorrow': 'Tomorrow',
    'this-week': 'This Week',
    'file-insurance-claim': 'File Insurance Claim',
    'claim-filed': 'Claim Filed',
    'claim-processing': 'Processing',
    'claim-approved': 'Approved',
    'claim-denied': 'Denied',
    // Status and States
    'active': 'Active',
    'inactive': 'Inactive',
    'pending': 'Pending',
    'completed': 'Completed',
    'cancelled': 'Cancelled',
    'in-progress': 'In Progress',
    // Receptionist Dashboard
    'receptionist-dashboard': 'Receptionist Dashboard',
    'patient-registration-checkin-vitals': 'Patient registration, check-in, and vital signs collection',
    'register-patient': 'Register Patient',
    'book-appointment': 'Book Appointment',
    'patient-checkin': 'Patient Check-In',
    'waiting-room': 'Waiting Room',
    'patient-search': 'Patient Search',
    'todays-checkins': "Today's Check-ins",
    'patients-checked-in-today': 'Patients checked in today',
    'waiting-patients': 'Waiting Patients',
    'patients-currently-waiting': 'Patients currently waiting',
    'scheduled-appointments': 'Scheduled Appointments',
    'total-appointments-today': 'Total appointments today',
    'avg-wait-time': 'Avg Wait Time',
    'average-wait-time-today': 'Average wait time today',
    'latest-patient-check-ins': 'Latest patient check-ins',
    'no-check-ins-today': 'No check-ins today',
    'search-and-check-in-patients': 'Search and check in patients',
    'search-by-name-or-mrn': 'Search by name or MRN...',
    'check-in': 'Check In',
    'no-patients-found': 'No patients found',
    'patients-waiting-to-be-seen': 'Patients waiting to be seen',
    'checked-in': 'Checked in',
    'vitals': 'Vitals',
    'no-patients-waiting': 'No patients waiting',
    'vital-signs-management': 'Vital Signs Management',
    'record-and-view-patient-vitals': 'Record and view patient vitals',
    'edit-vitals': 'Edit Vitals',
    'record-vitals': 'Record Vitals',
    'no-checked-in-patients': 'No checked-in patients',
    'search-and-manage-patients': 'Search and manage patients',
    'search-patients': 'Search patients...',
    // Patient Registration
    'register-new-patient': 'Register New Patient',
    'enter-patient-information-below': 'Enter patient information below',
    'personal-information': 'Personal Information',
    'enter-first-name': 'Enter first name',
    'enter-last-name': 'Enter last name',
    'select-gender': 'Select gender',
    'male': 'Male',
    'female': 'Female',
    'other': 'Other',
    'prefer-not-to-say': 'Prefer not to say',
    'phone-number': 'Phone Number',
    'enter-phone-number': 'Enter phone number',
    'optional': 'Optional',
    'enter-email': 'Enter email',
    'address-information': 'Address Information',
    'street-address': 'Street Address',
    'enter-street-address': 'Enter street address',
    'city': 'City',
    'enter-city': 'Enter city',
    'state': 'State',
    'enter-state': 'Enter state',
    'zip-code': 'ZIP Code',
    'enter-zip-code': 'Enter ZIP code',
    'emergency-contact': 'Emergency Contact',
    'contact-name': 'Contact Name',
    'enter-contact-name': 'Enter contact name',
    'relationship': 'Relationship',
    'spouse-parent-child': 'e.g., Spouse, Parent, Child',
    'contact-phone': 'Contact Phone',
    'enter-contact-phone': 'Enter contact phone',
    'insurance-information': 'Insurance Information',
    'enter-insurance-provider': 'Enter insurance provider',
    'policy-number': 'Policy Number',
    'enter-policy-number': 'Enter policy number',
    'group-number': 'Group Number',
    'enter-group-number': 'Enter group number',
    // Vital Signs
    'record-vital-signs': 'Record Vital Signs',
    'patient': 'Patient',
    'blood-pressure': 'Blood Pressure',
    'systolic': 'Systolic',
    'diastolic': 'Diastolic',
    'heart-oxygen': 'Heart & Oxygen',
    'heart-rate': 'Heart Rate',
    'oxygen-saturation': 'Oxygen Saturation',
    'temperature-breathing': 'Temperature & Breathing',
    'temperature': 'Temperature',
    'unit': 'Unit',
    'respiratory-rate': 'Respiratory Rate',
    'weight': 'Weight',
    'height': 'Height',
    'additional-measurements': 'Additional Measurements',
    'pain-level': 'Pain Level',
    'glucose-level': 'Glucose Level',
    'notes': 'Notes',
    'enter-any-additional-notes': 'Enter any additional notes...',
    'save-vital-signs': 'Save Vital Signs',
  },
  es: {
    // Navigation
    dashboard: 'Panel de Control',
    patients: 'Pacientes',
    appointments: 'Citas',
    prescriptions: 'Recetas',
    'pharmacy-dashboard': 'Panel de Farmacia',
    billing: 'Facturación',
    'lab-orders': 'Órdenes de Laboratorio',
    'health-recommendations': 'Insights de Salud IA',
    'medical-communications': 'Comunicaciones Médicas',
    'user-roles': 'Roles de Usuario',
    'tenant-management': 'Gestión de Inquilinos',
    'audit-logs': 'Registros de Auditoría',
    'white-label-settings': 'Configuración de Marca Blanca',
    'offline-mode': 'Modo Sin Conexión',
    'trial-status': 'Estado de Prueba',
    reports: 'Informes',
    // Common UI
    save: 'Guardar',
    cancel: 'Cancelar',
    edit: 'Editar',
    delete: 'Eliminar',
    add: 'Agregar',
    search: 'Buscar',
    filter: 'Filtrar',
    loading: 'Cargando...',
    'no-data': 'No hay datos disponibles',
    'view-all': 'Ver Todo',
    'view-details': 'Ver Detalles',
    close: 'Cerrar',
    submit: 'Enviar',
    'try-again': 'Intentar de Nuevo',
    refresh: 'Actualizar',
    // Healthcare specific
    'patient-name': 'Nombre del Paciente',
    'date-of-birth': 'Fecha de Nacimiento',
    'medical-record': 'Historial Médico',
    'insurance-info': 'Información del Seguro',
    'vital-signs': 'Signos Vitales',
    // Dashboard
    'total-patients': 'Total de Pacientes',
    'pending-appointments': 'Citas Pendientes',
    'active-prescriptions': 'Recetas Activas',
    'recent-activity': 'Actividad Reciente',
    'platform-overview': 'Resumen de la Plataforma',
    'system-health': 'Salud del Sistema',
    'active-tenants': 'Inquilinos Activos',
    'total-tenants': 'Total de Inquilinos',
    'monthly-revenue': 'Ingresos Mensuales',
    'growth-rate': 'Tasa de Crecimiento',
    'welcome-back': 'Bienvenido de vuelta',
    'quick-stats': 'Estadísticas Rápidas',
    // Profile & Settings
    'profile-settings': 'Configuración de Perfil',
    'account-preferences': 'Preferencias de Cuenta',
    'notification-settings': 'Configuración de Notificaciones',
    'display-language': 'Pantalla e Idioma',
    'security-privacy': 'Seguridad y Privacidad',
    'save-preferences': 'Guardar Preferencias',
    'language': 'Idioma',
    'timezone': 'Zona Horaria',
    'theme': 'Tema',
    // Forms and Actions
    'first-name': 'Nombre',
    'last-name': 'Apellido',
    'email': 'Correo Electrónico',
    'phone': 'Teléfono',
    'address': 'Dirección',
    'create': 'Crear',
    'update': 'Actualizar',
    'confirm': 'Confirmar',
    'back': 'Atrás',
    'next': 'Siguiente',
    'previous': 'Anterior',
    'my-account': 'Mi Cuenta',
    'sign-out': 'Cerrar Sesión',
    // Platform specific
    'uptime': 'Tiempo Activo',
    'api-response-time': 'Tiempo de Respuesta API',
    'data-storage': 'Almacenamiento de Datos',
    'current': 'Actual',
    'average': 'Promedio',
    'total-used': 'Total usado',
    'recent-tenant-activity': 'Actividad Reciente de Inquilinos',
    'latest-activities': 'Últimas actividades en todas las organizaciones de salud',
    'system-healthy': 'Sistema Saludable',
    'subscription-income': 'Ingresos de suscripción',
    'cross-platform-data': 'Datos multiplataforma',
    'all-tenants': 'Todos los inquilinos',
    'last-updated': 'Última actualización',
    'min-ago': 'min atrás',
    'new-patient-registration': 'Nuevo registro de paciente',
    'prescription-processed': 'Receta procesada',
    'lab-results-uploaded': 'Resultados de laboratorio subidos',
    'insurance-claim-submitted': 'Reclamo de seguro enviado',
    'appointment-scheduled': 'Cita programada',
    'minutes-ago': 'minutos atrás',
    'total-subscriptions': 'Total de Suscripciones',
    'all-active-plans': 'Todos los planes activos',
    'organization-types': 'Tipos de Organización',
    'distribution-healthcare-orgs': 'Distribución de organizaciones de salud en la plataforma',
    'platform-performance-metrics': 'Métricas de rendimiento y confiabilidad de la plataforma',
    'system-uptime': 'Tiempo de Actividad del Sistema',
    'last-30-days': 'Últimos 30 días',
    'active-sessions': 'Sesiones Activas',
    // Time related
    '2-minutes-ago': 'hace 2 minutos',
    '5-minutes-ago': 'hace 5 minutos',
    '8-minutes-ago': 'hace 8 minutos',
    '12-minutes-ago': 'hace 12 minutos',
    '15-minutes-ago': 'hace 15 minutos',
    // Healthcare organizations
    'hospitals': 'Hospitales',
    'hospital': 'Hospital',
    'pharmacies': 'Farmacias', 
    'laboratories': 'Laboratorios',
    'clinics': 'Clínicas',
    'insurance': 'Seguro',
    'insurance-claims': 'Reclamos de seguro',
    'insurance-provider': 'Proveedor de seguro',
    // Organization types
    'pharmacy': 'Farmacia',
    'laboratory': 'Laboratorio',
    'clinic': 'Clínica',
    'dental_clinic': 'Clínica Dental',
    'medical_center': 'Centro Médico',
    'healthcare_system': 'Sistema de Salud',
    // Page Titles and Navigation
    'patients': 'Pacientes',
    'appointments': 'Citas',
    'prescriptions': 'Prescripciones',
    'manage-patient-records': 'Gestionar información y registros médicos de pacientes',
    'schedule-manage-appointments': 'Gestionar citas y horarios de pacientes',
    'manage-prescriptions-medications': 'Gestionar prescripciones y medicamentos de pacientes',
    'recent-patient-activity': 'Actividad Reciente de Pacientes',
    'add-patient': 'Agregar Paciente',
    'add-appointment': 'Agregar Cita',
    'search-patients': 'Buscar pacientes...',
    'no-patients-found': 'No se encontraron pacientes',
    'no-patients-match-search': 'Ningún paciente coincide con su búsqueda',
    'get-started-add-first-patient': 'Comience agregando su primer paciente',
    'add-prescription': 'Agregar Prescripción',
    'access-denied': 'Acceso Denegado',
    'no-permission-tenant-management': 'No tienes permiso para acceder a la gestión de inquilinos.',
    'manage-healthcare-organizations': 'Gestionar organizaciones sanitarias y acceso multiinquilino',
    'add-organization': 'Agregar Organización',
    'manage-healthcare-team-permissions': 'Gestionar miembros del equipo sanitario y sus permisos de acceso',
    'add-user': 'Agregar Usuario',
    'comprehensive-audit-trail': 'Pista de auditoría integral para todo acceso y modificación de datos sanitarios',
    'hipaa-compliant': 'Conforme con HIPAA',
    'create-new-organization': 'Crear Nueva Organización',
    'organization-name': 'Nombre de Organización',
    'enter-organization-name': 'Ingrese nombre de organización',
    'organization-type': 'Tipo de Organización',
    'select-type': 'Seleccionar tipo',
    'hospital': 'Hospital',
    'clinic': 'Clínica',
    'pharmacy': 'Farmacia',
    'laboratory': 'Laboratorio',
    'insurance-provider': 'Proveedor de Seguros',
    'edit-user': 'Editar Usuario',
    'create-new-user': 'Crear Nuevo Usuario',
    'update-user-info-role': 'Actualizar información y rol del usuario',
    'add-new-team-member': 'Agregar un nuevo miembro del equipo a su organización de salud',
    'username': 'Nombre de Usuario',
    'enter-username': 'Ingrese nombre de usuario',
    'enter-email': 'Ingrese email',
    'enter-first-name': 'Ingrese primer nombre',
    'hipaa-compliance-status': 'Estado de Cumplimiento HIPAA',
    'current-compliance-metrics': 'Métricas de cumplimiento actuales y resumen de pista de auditoría',
    'data-encrypted': 'Datos Encriptados',
    'audit-entries': 'Entradas de Auditoría',
    'security-violations': 'Violaciones de Seguridad',
    'monitoring': 'Monitoreo',
    'audit-log-filters': 'Filtros de Registro de Auditoría',
    'search-entity-action-user': 'Buscar por entidad, acción o usuario...',
    'search-appointments': 'Buscar citas...',
    'search-prescriptions': 'Buscar prescripciones...',
    'no-patients-found': 'No se encontraron pacientes',
    'no-patients-match-search': 'Ningún paciente coincide con sus criterios de búsqueda',
    'get-started-add-first-patient': 'Comience agregando su primer paciente',
    'no-appointments-found': 'No se encontraron citas',
    'no-prescriptions-found': 'No se encontraron prescripciones',
    'view-details': 'Ver Detalles',
    'edit': 'Editar',
    'schedule-appointment': 'Programar Cita',
    'view-ehr': 'Ver Historia Clínica',
    'patient-information': 'Información del Paciente',
    'appointment-details': 'Detalles de la Cita',
    'prescription-details': 'Detalles de la Prescripción',
    'first-name': 'Nombre',
    'last-name': 'Apellido',
    'email': 'Correo Electrónico',
    'phone': 'Teléfono',
    'date-of-birth': 'Fecha de Nacimiento',
    'gender': 'Género',
    'address': 'Dirección',
    'emergency-contact': 'Contacto de Emergencia',
    'medical-history': 'Historia Médica',
    'medication': 'Medicamento',
    'dosage': 'Dosis',
    'frequency': 'Frecuencia',
    'prescribed-by': 'Prescrito por',
    'prescribed-date': 'Fecha de Prescripción',
    'appointment-date': 'Fecha de Cita',
    'appointment-time': 'Hora de Cita',
    'provider': 'Proveedor',
    'patient': 'Paciente',
    'reason': 'Motivo',
    'notes': 'Notas',
    'age': 'Edad',
    'years': 'años',
    'male': 'Masculino',
    'female': 'Femenino',
    'other': 'Otro',
    // Status labels
    'scheduled': 'Programada',
    'confirmed': 'Confirmada',
    'checked-in': 'Registrado',
    'in-progress': 'En Progreso',
    'completed': 'Completada',
    'cancelled': 'Cancelada',
    'no-show': 'No Asistió',
    'prescribed': 'Prescrita',
    'sent-to-pharmacy': 'Enviada a Farmacia',
    'filled': 'Surtida',
    'picked-up': 'Recogida',
    'loading': 'Cargando...',
    'all': 'Todos',
    'filter-by-status': 'Filtrar por Estado',
    'filter-by-date': 'Filtrar por Fecha',
    'today': 'Hoy',
    'tomorrow': 'Mañana',
    'this-week': 'Esta Semana',
    'file-insurance-claim': 'Presentar Reclamo de Seguro',
    'claim-filed': 'Reclamo Presentado',
    'claim-processing': 'Procesando',
    'claim-approved': 'Aprobado',
    'claim-denied': 'Denegado',
    // Status and States
    'active': 'Activo',
    'inactive': 'Inactivo',
    'pending': 'Pendiente',
    'completed': 'Completado',
    'cancelled': 'Cancelado',
    'in-progress': 'En Progreso',
  },
  fr: {
    // Navigation
    dashboard: 'Tableau de Bord',
    patients: 'Patients',
    appointments: 'Rendez-vous',
    prescriptions: 'Ordonnances',
    'pharmacy-dashboard': 'Tableau de Bord de la Pharmacie',
    billing: 'Facturation',
    'lab-orders': 'Analyses de Laboratoire',
    'health-recommendations': 'Insights Santé IA',
    'medical-communications': 'Communications Médicales',
    'user-roles': 'Rôles Utilisateur',
    'tenant-management': 'Gestion des Abonnés',
    'audit-logs': 'Journaux d\'Audit',
    'white-label-settings': 'Paramètres de Marque Blanche',
    'offline-mode': 'Mode Hors Ligne',
    'trial-status': 'Statut d\'Essai',
    reports: 'Rapports',
    // Common UI
    save: 'Sauvegarder',
    cancel: 'Annuler',
    edit: 'Modifier',
    delete: 'Supprimer',
    add: 'Ajouter',
    search: 'Rechercher',
    filter: 'Filtrer',
    loading: 'Chargement...',
    'no-data': 'Aucune donnée disponible',
    'view-all': 'Voir Tout',
    'view-details': 'Voir les Détails',
    close: 'Fermer',
    submit: 'Soumettre',
    'try-again': 'Réessayer',
    refresh: 'Actualiser',
    // Healthcare specific
    'patient-name': 'Nom du Patient',
    'date-of-birth': 'Date de Naissance',
    'medical-record': 'Dossier Médical',
    'insurance-info': 'Informations d\'Assurance',
    'vital-signs': 'Signes Vitaux',
    // Dashboard
    'total-patients': 'Total des Patients',
    'pending-appointments': 'Rendez-vous en Attente',
    'active-prescriptions': 'Ordonnances Actives',
    'recent-activity': 'Activité Récente',
    'platform-overview': 'Aperçu de la Plateforme',
    'system-health': 'Performance du Système',
    'active-tenants': 'Abonnés Actifs',
    'total-tenants': 'Total des Abonnés',
    'monthly-revenue': 'Revenus Mensuels',
    'growth-rate': 'Taux de Croissance',
    'welcome-back': 'Bon retour',
    'quick-stats': 'Statistiques Rapides',
    // Profile & Settings
    'profile-settings': 'Paramètres de Profil',
    'account-preferences': 'Préférences de Compte',
    'notification-settings': 'Paramètres de Notification',
    'display-language': 'Affichage et Langue',
    'security-privacy': 'Sécurité et Confidentialité',
    'save-preferences': 'Enregistrer les Préférences',
    'language': 'Langue',
    'timezone': 'Fuseau Horaire',
    'theme': 'Thème',
    // Forms and Actions
    'first-name': 'Prénom',
    'last-name': 'Nom de Famille',
    'email': 'E-mail',
    'phone': 'Téléphone',
    'address': 'Adresse',
    'create': 'Créer',
    'update': 'Mettre à Jour',
    'confirm': 'Confirmer',
    'back': 'Retour',
    'next': 'Suivant',
    'previous': 'Précédent',
    'my-account': 'Mon Compte',
    'sign-out': 'Se Déconnecter',
    // Platform specific
    'uptime': 'Temps de Fonctionnement',
    'api-response-time': 'Temps de Réponse API',
    'data-storage': 'Stockage de Données',
    'current': 'Actuel',
    'average': 'Moyenne',
    'total-used': 'Total utilisé',
    'recent-tenant-activity': 'Activité Récente des Abonnés',
    'latest-activities': 'Dernières activités dans toutes les organisations de santé',
    'system-healthy': 'Système Performant',
    'subscription-income': 'Revenus d\'abonnement',
    'cross-platform-data': 'Données multiplateformes',
    'all-tenants': 'Tous les abonnés',
    'last-updated': 'Dernière mise à jour',
    'min-ago': 'min il y a',
    'new-patient-registration': 'Nouvel enregistrement de patient',
    'prescription-processed': 'Ordonnance traitée',
    'lab-results-uploaded': 'Résultats de laboratoire téléchargés',
    'insurance-claim-submitted': 'Réclamation d\'assurance soumise',
    'appointment-scheduled': 'Rendez-vous programmé',
    'minutes-ago': 'minutes il y a',
    'total-subscriptions': 'Total des Abonnements',
    'all-active-plans': 'Tous les plans actifs',
    'organization-types': 'Types d\'Organisation',
    'distribution-healthcare-orgs': 'Distribution des organisations de santé sur la plateforme',
    'platform-performance-metrics': 'Métriques de performance et de fiabilité de la plateforme',
    'system-uptime': 'Temps de Fonctionnement du Système',
    'last-30-days': '30 derniers jours',
    'active-sessions': 'Sessions Actives',
    // Time related
    '2-minutes-ago': 'il y a 2 minutes',
    '5-minutes-ago': 'il y a 5 minutes',
    '8-minutes-ago': 'il y a 8 minutes',
    '12-minutes-ago': 'il y a 12 minutes',
    '15-minutes-ago': 'il y a 15 minutes',
    // Healthcare organizations
    'hospitals': 'Hôpitaux',
    'hospital': 'Hôpital', 
    'pharmacies': 'Pharmacies',
    'laboratories': 'Laboratoires',
    'clinics': 'Cliniques',
    'insurance': 'Assurance',
    'insurance-claims': 'Réclamations d\'assurance',
    'insurance-provider': 'Fournisseur d\'assurance',
    // Organization types
    'pharmacy': 'Pharmacie',
    'laboratory': 'Laboratoire',
    'clinic': 'Clinique',
    'dental_clinic': 'Clinique Dentaire',
    'medical_center': 'Centre Médical',
    'healthcare_system': 'Système de Santé',
    // Page Titles and Navigation
    'patients': 'Patients',
    'appointments': 'Rendez-vous',
    'prescriptions': 'Ordonnances',
    'manage-patient-records': 'Gérer les informations et dossiers médicaux des patients',
    'schedule-manage-appointments': 'Gérer les rendez-vous et planifications des patients',
    'manage-prescriptions-medications': 'Gérer les ordonnances et médicaments des patients',
    'recent-patient-activity': 'Activité Récente des Patients',
    'add-patient': 'Ajouter Patient',
    'add-appointment': 'Ajouter Rendez-vous',
    'search-patients': 'Rechercher patients...',
    'no-patients-found': 'Aucun patient trouvé',
    'no-patients-match-search': 'Aucun patient ne correspond à votre recherche',
    'get-started-add-first-patient': 'Commencez par ajouter votre premier patient',
    'add-prescription': 'Ajouter Ordonnance',
    'access-denied': 'Accès Refusé',
    'no-permission-tenant-management': "Vous n'avez pas la permission d'accéder à la gestion des locataires.",
    'manage-healthcare-organizations': 'Gérer les organisations de santé et accès multi-locataires',
    'add-organization': 'Ajouter Organisation',
    'manage-healthcare-team-permissions': "Gérer les membres de l'équipe de santé et leurs permissions d'accès",
    'add-user': 'Ajouter Utilisateur',
    'comprehensive-audit-trail': "Piste d'audit complète pour tous les accès et modifications de données de santé",
    'hipaa-compliant': 'Conforme HIPAA',
    'create-new-organization': 'Créer Nouvelle Organisation',
    'organization-name': "Nom de l'Organisation",
    'enter-organization-name': "Entrez le nom de l'organisation",
    'organization-type': "Type d'Organisation",
    'select-type': 'Sélectionner le type',
    'hospital': 'Hôpital',
    'clinic': 'Clinique',
    'pharmacy': 'Pharmacie',
    'laboratory': 'Laboratoire',
    'insurance-provider': "Fournisseur d'Assurance",
    'edit-user': 'Modifier Utilisateur',
    'create-new-user': 'Créer Nouvel Utilisateur',
    'update-user-info-role': "Mettre à jour les informations et le rôle de l'utilisateur",
    'add-new-team-member': "Ajouter un nouveau membre d'équipe à votre organisation de santé",
    'username': "Nom d'Utilisateur",
    'enter-username': "Entrez le nom d'utilisateur",
    'enter-email': 'Entrez email',
    'enter-first-name': 'Entrez le prénom',
    'hipaa-compliance-status': 'Statut de Conformité HIPAA',
    'current-compliance-metrics': "Métriques de conformité actuelles et résumé de la piste d'audit",
    'data-encrypted': 'Données Chiffrées',
    'audit-entries': "Entrées d'Audit",
    'security-violations': 'Violations de Sécurité',
    'monitoring': 'Surveillance',
    'audit-log-filters': "Filtres de Journal d'Audit",
    'search-entity-action-user': 'Rechercher par entité, action ou utilisateur...',
    'search-appointments': 'Rechercher rendez-vous...',
    'search-prescriptions': 'Rechercher ordonnances...',
    'no-appointments-found': 'Aucun rendez-vous trouvé',
    'no-prescriptions-found': 'Aucune ordonnance trouvée',
    'schedule-appointment': 'Programmer Rendez-vous',
    'view-ehr': 'Voir Dossier Médical',
    'patient-information': 'Informations Patient',
    'appointment-details': 'Détails du Rendez-vous',
    'prescription-details': 'Détails de l\'Ordonnance',
    'emergency-contact': 'Contact d\'Urgence',
    'medical-history': 'Antécédents Médicaux',
    'medication': 'Médicament',
    'dosage': 'Dosage',
    'frequency': 'Fréquence',
    'prescribed-by': 'Prescrit par',
    'prescribed-date': 'Date de Prescription',
    'appointment-date': 'Date du Rendez-vous',
    'appointment-time': 'Heure du Rendez-vous',
    'provider': 'Prestataire',
    'patient': 'Patient',
    'reason': 'Motif',
    'notes': 'Notes',
    'age': 'Âge',
    'years': 'ans',
    'male': 'Masculin',
    'female': 'Féminin',
    'other': 'Autre',
    // Status labels
    'scheduled': 'Programmé',
    'confirmed': 'Confirmé',
    'checked-in': 'Enregistré',
    'in-progress': 'En Cours',
    'completed': 'Terminé',
    'cancelled': 'Annulé',
    'no-show': 'Absent',
    'prescribed': 'Prescrite',
    'sent-to-pharmacy': 'Envoyée à la Pharmacie',
    'filled': 'Délivrée',
    'picked-up': 'Récupérée',
  },
  de: {
    // Navigation
    dashboard: 'Dashboard',
    patients: 'Patienten',
    appointments: 'Termine',
    prescriptions: 'Verschreibungen',
    billing: 'Abrechnung',
    'lab-orders': 'Laboraufträge',
    reports: 'Berichte',
    // Common UI
    save: 'Speichern',
    cancel: 'Abbrechen',
    edit: 'Bearbeiten',
    delete: 'Löschen',
    add: 'Hinzufügen',
    search: 'Suchen',
    filter: 'Filtern',
    // Healthcare specific
    'patient-name': 'Patientenname',
    'date-of-birth': 'Geburtsdatum',
    'medical-record': 'Krankenakte',
    'insurance-info': 'Versicherungsinformationen',
    'vital-signs': 'Vitalzeichen',
    // Dashboard
    'total-patients': 'Gesamte Patienten',
    'pending-appointments': 'Ausstehende Termine',
    'active-prescriptions': 'Aktive Verschreibungen',
    'recent-activity': 'Letzte Aktivität',
    // Profile & Settings
    'profile-settings': 'Profileinstellungen',
    'account-preferences': 'Kontoeinstellungen',
    'notification-settings': 'Benachrichtigungseinstellungen',
    'display-language': 'Anzeige und Sprache',
    'security-privacy': 'Sicherheit und Datenschutz',
    'save-preferences': 'Einstellungen Speichern',
    'language': 'Sprache',
    'timezone': 'Zeitzone',
    'theme': 'Design',
  }
};

interface TranslationContextType {
  currentLanguage: string;
  setLanguage: (language: string) => void;
  t: (key: string) => string;
  isTranslating: boolean;
}

const TranslationContext = createContext<TranslationContextType | undefined>(undefined);

export const useTranslation = () => {
  const context = useContext(TranslationContext);
  if (context === undefined) {
    throw new Error('useTranslation must be used within a TranslationProvider');
  }
  return context;
};

interface TranslationProviderProps {
  children: ReactNode;
}

export const TranslationProvider = ({ children }: TranslationProviderProps) => {
  const [currentLanguage, setCurrentLanguage] = useState<string>(() => {
    // Initialize with saved language if available
    const savedLanguage = localStorage.getItem('selectedLanguage');
    return savedLanguage || 'en';
  });
  const [isTranslating, setIsTranslating] = useState(false);

  // Remove conflicting language change event listener that might be causing resets

  const setLanguage = (language: string) => {
    if (language === currentLanguage) {
      return;
    }
    
    setIsTranslating(true);
    localStorage.setItem('selectedLanguage', language);
    
    // Immediate update without timeout to prevent reversion
    setCurrentLanguage(language);
    
    setTimeout(() => {
      setIsTranslating(false);
    }, 300);
  };

  const t = (key: string): string => {
    try {
      const languageDict = translations[currentLanguage as keyof typeof translations] || translations.en;
      const translation = languageDict[key as keyof typeof languageDict];
      return translation || key;
    } catch (error) {
      console.error('Translation error:', error);
      return key;
    }
  };

  return (
    <TranslationContext.Provider value={{
      currentLanguage,
      setLanguage,
      t,
      isTranslating
    }}>
      {children}
    </TranslationContext.Provider>
  );
};